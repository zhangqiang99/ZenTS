<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Request Context | ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" size="57x57" href="/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" size="60x60" href="/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" size="72x72" href="/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" size="76x76" href="/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" size="114x114" href="/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" size="120x120" href="/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" size="144x144" href="/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" size="152x152" href="/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" size="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" size="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" size="96x96" href="/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon/favicon-16x16.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;700&amp;family=Rubik:wght@700&amp;Quicksand:wght@300;700&amp;Source+Code+Pro:wght@400;700&amp;display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <script>                
        window.addEventListener('load', function () {
          var inputSelector = '.search-box > input';
          var $el = document.querySelector(inputSelector);
          
          $el.disabled = true;
          $el.placeholder = 'Loading...';

          var script = document.createElement("script");
          script.addEventListener("load", function() {
            docsearch({
              apiKey: '1c03de24a87faf1bfd8b7e760c63b3ab',
              indexName: 'zents',
              inputSelector: inputSelector,
            });
            $el.disabled = false;
            $el.placeholder = 'Search...';
          });

          script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js";

          document.body.appendChild(script);            
        });
      </script>
    <meta name="description" content="ZenTS is a Node.js & TypeScript MVC-Framework for building rich web applications, released as free and open-source software under the MIT License. It is designed for building web applications with modern tools and design patterns.">
    <meta name="keywords" content="ZenTS guide tutorial documentation http request framework mvc TypeScript">
    <meta name="theme-color" content="#512DA8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.1ff9e24c.css" as="style"><link rel="preload" href="/assets/js/app.0f874116.js" as="script"><link rel="preload" href="/assets/js/2.76c813c5.js" as="script"><link rel="preload" href="/assets/js/25.226c1b2a.js" as="script"><link rel="preload" href="/assets/js/3.9792adb6.js" as="script"><link rel="prefetch" href="/assets/js/10.e6175381.js"><link rel="prefetch" href="/assets/js/11.b89d07bb.js"><link rel="prefetch" href="/assets/js/12.f1869a76.js"><link rel="prefetch" href="/assets/js/13.26305f8b.js"><link rel="prefetch" href="/assets/js/14.49d311f2.js"><link rel="prefetch" href="/assets/js/15.42758e36.js"><link rel="prefetch" href="/assets/js/16.a680d30b.js"><link rel="prefetch" href="/assets/js/17.fc88c18b.js"><link rel="prefetch" href="/assets/js/18.c009c08b.js"><link rel="prefetch" href="/assets/js/19.e44e68e1.js"><link rel="prefetch" href="/assets/js/20.a14f83a1.js"><link rel="prefetch" href="/assets/js/21.309c8584.js"><link rel="prefetch" href="/assets/js/22.4bb1ce2d.js"><link rel="prefetch" href="/assets/js/23.7bb3236f.js"><link rel="prefetch" href="/assets/js/24.9896629b.js"><link rel="prefetch" href="/assets/js/26.c67d5237.js"><link rel="prefetch" href="/assets/js/27.e5797b2b.js"><link rel="prefetch" href="/assets/js/28.38369c54.js"><link rel="prefetch" href="/assets/js/29.1374246d.js"><link rel="prefetch" href="/assets/js/30.be21812e.js"><link rel="prefetch" href="/assets/js/31.19a8291b.js"><link rel="prefetch" href="/assets/js/32.70b347c5.js"><link rel="prefetch" href="/assets/js/33.81e49477.js"><link rel="prefetch" href="/assets/js/34.f13600a5.js"><link rel="prefetch" href="/assets/js/35.491a9c45.js"><link rel="prefetch" href="/assets/js/4.1b3227c4.js"><link rel="prefetch" href="/assets/js/5.60d54524.js"><link rel="prefetch" href="/assets/js/6.53de5e0c.js"><link rel="prefetch" href="/assets/js/7.3c786c73.js"><link rel="prefetch" href="/assets/js/8.92f447d2.js"><link rel="prefetch" href="/assets/js/9.96e777e5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ff9e24c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/zents_logo_icon.png" alt="ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications" class="logo"> <span class="site-name can-hide">ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div><div class="nav-item"><a href="/roadmap.html" class="nav-link">
  Roadmap
</a></div> <a href="https://github.com/sahachide/ZenTS" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div><div class="nav-item"><a href="/roadmap.html" class="nav-link">
  Roadmap
</a></div> <a href="https://github.com/sahachide/ZenTS" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/gettingstarted/installation.html" class="sidebar-link">Installation &amp; Setup</a></li><li><a href="/guide/gettingstarted/helloworld.html" class="sidebar-link">Hello World Example</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advancedguides/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/guide/advancedguides/request.html" aria-current="page" class="active sidebar-link">Request Context</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#accessing-the-request-context" class="sidebar-link">Accessing the request context</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#route-parameters" class="sidebar-link">Route parameters</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#url-querystring" class="sidebar-link">URL querystring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#parsing-nested-objects" class="sidebar-link">Parsing nested objects</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#parsing-arrays" class="sidebar-link">Parsing arrays</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#using-a-different-delimiter" class="sidebar-link">Using a different delimiter</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#accessing-the-raw-search-string" class="sidebar-link">Accessing the raw search string</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#and-more" class="sidebar-link">And more...</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#request-body" class="sidebar-link">Request body</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#receiving-form-data" class="sidebar-link">Receiving form data</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#receiving-json" class="sidebar-link">Receiving JSON</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#and-more-2" class="sidebar-link">And more...</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#working-with-the-http-request-header" class="sidebar-link">Working with the HTTP request header</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#get-a-header-value" class="sidebar-link">Get a header value</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#set-a-header-value" class="sidebar-link">Set a header value</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#remove-a-header-value" class="sidebar-link">Remove a header value</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#accessing-raw-request-object" class="sidebar-link">Accessing raw request object</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/request.html#next-steps" class="sidebar-link">Next steps</a></li></ul></li><li><a href="/guide/advancedguides/response.html" class="sidebar-link">Response Context</a></li><li><a href="/guide/advancedguides/routing.html" class="sidebar-link">Routing</a></li><li><a href="/guide/advancedguides/database.html" class="sidebar-link">Database / ORM</a></li><li><a href="/guide/advancedguides/redis.html" class="sidebar-link">Redis</a></li><li><a href="/guide/advancedguides/user_management.html" class="sidebar-link">User and Session Management</a></li><li><a href="/guide/advancedguides/templates.html" class="sidebar-link">Views &amp; Templates</a></li><li><a href="/guide/advancedguides/static_files.html" class="sidebar-link">Static files</a></li><li><a href="/guide/advancedguides/services.html" class="sidebar-link">Services</a></li><li><a href="/guide/advancedguides/dependency_injection.html" class="sidebar-link">Dependency Injection</a></li></ul></section></li><li><a href="/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/cli.html" class="sidebar-link">Command-line interface (CLI)</a></li><li><a href="/roadmap.html" class="sidebar-link">Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Request Context</h1> <div data-v-c475de54><div class="text-xs reading-time -mt-5" data-v-c475de54>
    10 min read (1896 words)
  </div> <div class="flex justify-center mt-16 mb-24" data-v-c475de54><img src="/guide/request.svg" class="illustration-image" data-v-c475de54></div> <h2 data-v-c475de54><a href="#" class="header-anchor" data-v-c475de54>#</a> Table of contents</h2> <div data-v-c475de54><p data-v-c475de54></p><div class="table-of-contents" data-v-c475de54><ul data-v-c475de54><li data-v-c475de54><a href="#introduction" data-v-c475de54>Introduction</a></li><li data-v-c475de54><a href="#accessing-the-request-context" data-v-c475de54>Accessing the request context</a></li><li data-v-c475de54><a href="#route-parameters" data-v-c475de54>Route parameters</a></li><li data-v-c475de54><a href="#url-querystring" data-v-c475de54>URL querystring</a><ul data-v-c475de54><li data-v-c475de54><a href="#parsing-nested-objects" data-v-c475de54>Parsing nested objects</a></li><li data-v-c475de54><a href="#parsing-arrays" data-v-c475de54>Parsing arrays</a></li><li data-v-c475de54><a href="#using-a-different-delimiter" data-v-c475de54>Using a different delimiter</a></li><li data-v-c475de54><a href="#accessing-the-raw-search-string" data-v-c475de54>Accessing the raw search string</a></li><li data-v-c475de54><a href="#and-more" data-v-c475de54>And more...</a></li></ul></li><li data-v-c475de54><a href="#request-body" data-v-c475de54>Request body</a><ul data-v-c475de54><li data-v-c475de54><a href="#receiving-form-data" data-v-c475de54>Receiving form data</a></li><li data-v-c475de54><a href="#receiving-json" data-v-c475de54>Receiving JSON</a></li><li data-v-c475de54><a href="#and-more" data-v-c475de54>And more...</a></li></ul></li><li data-v-c475de54><a href="#working-with-the-http-request-header" data-v-c475de54>Working with the HTTP request header</a><ul data-v-c475de54><li data-v-c475de54><a href="#get-a-header-value" data-v-c475de54>Get a header value</a></li><li data-v-c475de54><a href="#set-a-header-value" data-v-c475de54>Set a header value</a></li><li data-v-c475de54><a href="#remove-a-header-value" data-v-c475de54>Remove a header value</a></li></ul></li><li data-v-c475de54><a href="#accessing-raw-request-object" data-v-c475de54>Accessing raw request object</a></li><li data-v-c475de54><a href="#next-steps" data-v-c475de54>Next steps</a></li></ul></div></div></div><p></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This guide assumes you already familiar with controllers and controller actions. If not, read the <a href="/guide/advancedguides/controllers.html">controller guide</a> first.</p></div> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>A complex (or simple) web-application interacts with the user frequently. When the user sends a contact form, makes a payment, downloads a file or even just opens a specific webpage, the server will receive the request and process in a controller action. As a developer, you need a simple and fast way to access the data (e.g. form data) send by the user. For this purpose, ZenTS passes a so-called <strong>action context</strong> as first argument to every controller action. The request object is part of the <strong>action context</strong> and is described in this guide.</p> <h2 id="accessing-the-request-context"><a href="#accessing-the-request-context" class="header-anchor">#</a> Accessing the request context</h2> <p>The request context is part of the <strong>action context</strong>, which is passed as first argument to every controller action:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// req is the request context</span>

  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The request context contains various useful datasets which are explained in the following chapters.</p> <h2 id="route-parameters"><a href="#route-parameters" class="header-anchor">#</a> Route parameters</h2> <p>A common way to fetch IDs (e.g. a product ID) from a user is adding it aa a route parameter. These parameters are defined via route annotation:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/product/:productId&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">productDetail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>You can access the defined route parameters in the <code>req.params.productId</code>. If the user call this controller action with <code>/product/42</code> the value will be <code>42</code>.</p> <p>A route annotation can also hold more then just one parameter:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/compare/:productId1/:product2&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">compareProducts</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// suppose user calls this action with /compare/123/456</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>productId1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;123&quot;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>productId2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;456&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Head over to the <a href="/guide/advancedguides/routing.html">routing guide</a> to learn more about defining URLs in your application.</p></div> <p>Since routing parameters are accessed frequently, they are also first-class citizens of the <strong>controller action context</strong>. So instead of accessing parameters via <code>req.params</code>, you just can use <code>params</code> as deconstructed value from the context:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/product/:productId&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">productDetail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> params <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>productId <span class="token operator">===</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ZenTS won't cast your routing parameters to a specific type. It is up to the application code to decide if a passed routing parameter is considered valid or not. All values in the <code>params</code> object will be from type <code>string</code>. :</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IncomingParams</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="url-querystring"><a href="#url-querystring" class="header-anchor">#</a> URL querystring</h2> <p>The querystring (also known as <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/search" target="_blank" rel="noopener noreferrer">search<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> part of the URL) is, like the routing parameters, part of the URL namely everything what comes after the <code>?</code> part of a URL. The framework parses the querystring for you and exposes the result as <code>req.query</code> under the <strong>controller action context</strong>.</p> <p>The querystring is parsed as plain object, for example if the user opens http://localhost:8080/catalog/?foo=bar:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: 'bar' }</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;bar&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Similar to the routing parameters the query object is also a first-class citizen of the action context, so you can access it directly like this:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;bar&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="parsing-nested-objects"><a href="#parsing-nested-objects" class="header-anchor">#</a> Parsing nested objects</h3> <p>Creating querystrings as nested objects is also possible by surrounding the name of the sub-keys with square brackets <code>[]</code>.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?foo[bar]=baz</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: { bar: 'baz' } }</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { bar: 'baz' }</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;baz&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Make sure to check if a variable exists (like <code>req.query.foo.bar</code>) before accessing it. Querystrings can be easily omitted by user or clients. It's a good advice to have some default values for them in case a querystring (or part of it) is missing.</p></div> <p>Objects can even be nested further:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?foo[bar][baz]=nested</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: { bar: { baz: 'nested' } } }</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">.</span>baz<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs &quot;nested&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>The default limit of nested objects is <em>5</em>. This limit can be overwritten in the config, but keep in mind that the number should be reasonably small, otherwise your application might be vulnerable to attacks. You can read more about configuration in <a href="/configuration.html">this guide</a>.</p></div> <p>It's also possible to use the dot notation for constructing nested objects. You must enable this feature in the projects configuration file:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;web&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;querystring&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;allowDots&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?foo.bar=baz</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: { bar: 'baz' } }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="parsing-arrays"><a href="#parsing-arrays" class="header-anchor">#</a> Parsing arrays</h3> <p>Arrays can be constructed from the querystring in a similar way like nested objects, using the <code>[]</code> notation (but this time without key(s)):</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?foo[]=bar&amp;foo[]=baz</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: ['bar', 'baz'] }</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs ['bar', 'baz']</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Indexes can also be supplied:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?foo[1]=bar&amp;foo[0]=baz</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { foo: ['baz', 'bar'] }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Keep in mind that specifying indices in an array is limited to a maximum of <code>20</code>. Any array members with an index of greater than 20 will instead be converted to an object with the index as the key.</p> <h3 id="using-a-different-delimiter"><a href="#using-a-different-delimiter" class="header-anchor">#</a> Using a different delimiter</h3> <p>The default delimiter (<code>&amp;</code>) can be changed by setting the <code>web.querystring.delimiter</code> option:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;web&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;querystring&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;delimiter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?a=b;c=d</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { a: 'b', c: 'd' }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Multiple delimiters are also supported by supplying a <code>RegEx</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  web<span class="token operator">:</span> <span class="token punctuation">{</span>
    querystring<span class="token operator">:</span> <span class="token punctuation">{</span>
      delimiter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[;,]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This is only supported when using a .js config file. Please refer to the <a href="/configuration.html">configuration guide</a> for more information.</p></div> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open: http://localhost:8080/catalog/?a=b;c=d,e=f</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs { a: 'b', c: 'd', e: 'f' }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="accessing-the-raw-search-string"><a href="#accessing-the-raw-search-string" class="header-anchor">#</a> Accessing the raw search string</h3> <p>The raw URL search string can also be accessed as a child property of the <code>request</code> context:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/catalog&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// open http://localhost:8080/catalog/?foo=bar</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs ?foo=bar</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="and-more"><a href="#and-more" class="header-anchor">#</a> And more...</h3> <p>ZenTS use the awesome <a href="https://www.npmjs.com/package/qs" target="_blank" rel="noopener noreferrer">qs package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for parsing the querystring. The package contains a lot of options and is well <a href="https://www.npmjs.com/package/qs" target="_blank" rel="noopener noreferrer">documented<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. All options are also supported by ZenTS (see <a href="/configuration.html">configuration guide</a>).</p> <h2 id="request-body"><a href="#request-body" class="header-anchor">#</a> Request body</h2> <p>Some controller actions need more data that can be delivered reasonable by modifying the URL (with querystrings or route parameters). For example, when a user sends a contact form on a webpage or a client calling an API endpoint with a JSON payload, this data is usually transmitted inside the request body. Not all http methods have a body, <code>GET</code>, <code>HEAD</code> or <code>DELETE</code> requests normally don't contain a request body. In contrast to the <code>POST</code> or <code>PUT</code> http methods, which are likely to contain some body data.</p> <p>The body can be accessed in two ways:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/product&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">addProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> body <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// using the body shortcut from the Context. This is a reference to req.body.</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The <code>body</code> will be automatically converted to an object, no matter if the sends a multi-part form, a JSON or a urlencoded form.</p> <h3 id="receiving-form-data"><a href="#receiving-form-data" class="header-anchor">#</a> Receiving form data</h3> <p>A classic example where request body data is send over the wire is a good old contact form:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/contact-form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>E-Mail: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Message: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Send<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>This is a pretty straight forward HTML form with some standard text-fields. The controller action implementation could look like this:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/contact-form&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">submitContactForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span> body <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span> <span class="token comment">/* logs {
    name: 'John Doe',
    email: 'john@example.com',
    message: 'Lorem ipsum'
  } */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="receiving-json"><a href="#receiving-json" class="header-anchor">#</a> Receiving JSON</h3> <p>Receiving a JSON body is similar to standard form data:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> --request POST <span class="token punctuation">\</span>
  --url http://localhost:8000/product <span class="token punctuation">\</span>
  --header <span class="token string">'content-type: application/json'</span> <span class="token punctuation">\</span>
  --data <span class="token string">'{
	  &quot;name&quot;: &quot;MyProduct&quot;,
	  &quot;description&quot;: &quot;Lorem ipsum&quot;,
	  &quot;price&quot;: 2499
  }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The controller action look like this:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/product&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> body <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span> <span class="token comment">/* logs {
    name: 'MyProduct',
    description: 'Lorem ipsum',
    price: 2499
  }
  */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>As you see, handling body data is pretty easy in ZenTS.</p> <h3 id="and-more-2"><a href="#and-more-2" class="header-anchor">#</a> And more...</h3> <p>ZenTS use the great and fast <a href="https://www.npmjs.com/package/formidable" target="_blank" rel="noopener noreferrer">formidable package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for parsing the request body. The package contains a lot of options and is well <a href="https://www.npmjs.com/package/formidable" target="_blank" rel="noopener noreferrer">documented<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. All options are also supported by ZenTS (see <a href="/configuration.html">configuration guide</a>).</p> <h2 id="working-with-the-http-request-header"><a href="#working-with-the-http-request-header" class="header-anchor">#</a> Working with the HTTP request header</h2> <p>Sometimes you may need to access the HTTP headers send from a client. The headers are exposed as <code>req.header</code> inside the action context.</p> <h3 id="get-a-header-value"><a href="#get-a-header-value" class="header-anchor">#</a> Get a header value</h3> <p>Accessing a specific header field by calling <code>req.header.get(key: string)</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'accept'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs for example: 'text/html,application/xhtml+xml,application/xml'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In addition, the <code>get()</code> method has a type generic, which you can use to cast the correct type for the header value (either <code>string</code> or <code>string[]</code>)</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> example <span class="token operator">=</span> req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> example<span class="token punctuation">)</span> <span class="token comment">// logs &quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>To return all request headers, you can call <code>req.header.all()</code>, which returns an iterable iterator:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>A way to check for the existing of a header key is the <code>has()</code> method:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'does_not_exist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Header exists&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Header doesn't exists&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// logs &quot;Header doesn't exists&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="set-a-header-value"><a href="#set-a-header-value" class="header-anchor">#</a> Set a header value</h3> <p>It's also possible to set new header key / value pairs. This can be useful when you writing plugins or modifying the request header in a middleware:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>There is even more to request headers, e.g. some shortcut methods like <code>getHost()</code>. You can read more about them in the <a href="/guide/api/">API reference</a>.</p> <h3 id="remove-a-header-value"><a href="#remove-a-header-value" class="header-anchor">#</a> Remove a header value</h3> <p>Request header values can be removed by calling the <code>remove()</code> method on the <code>req.header</code> object:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// logs &quot;bar&quot;</span>
  req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// logs undefined&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="accessing-raw-request-object"><a href="#accessing-raw-request-object" class="header-anchor">#</a> Accessing raw request object</h2> <p>The raw request object supplied by <a href="https://nodejs.org/api/http.html" target="_blank" rel="noopener noreferrer">Node.js http module<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is exposed under the <code>req.nodeReq</code> property. Working with the raw request object can be useful if you want to do something with it that is currently not supported by ZenTS. Be aware that when you modifying some parts of the raw request object, e.g. the header, these modifications are not automatically applied to the corresponding ZenTS controller action context. In generally you should avoid modifying the <code>req.nodeReq</code> object directly and use it ZenTS counterparts when ever possible.</p> <h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next steps</h2> <p>Congrats! You just mastered the request context of a controller action. Now you should be able to handle incoming data easily thanks to ZenTS request context. Always keep in mind that you can take a look at the API reference <a href="/guide/api/">documentation</a> if you don't know how to access specific data.</p> <p>Now it's time to learn more about returning a response and how to setup routes properly. The following guides will help you to archive these goals:</p> <ul><li><a href="/guide/advancedguides/request.html" aria-current="page" class="router-link-exact-active router-link-active">Request guide</a></li> <li><a href="/guide/advancedguides/routing.html">Routing guide</a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sahachide/ZenTS/edit/master/docs/guide/advancedguides/request.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/15/2020, 1:47:36 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/advancedguides/controllers.html" class="prev">
        Controllers
      </a></span> <span class="next"><a href="/guide/advancedguides/response.html">
        Response Context
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.0f874116.js" defer></script><script src="/assets/js/2.76c813c5.js" defer></script><script src="/assets/js/25.226c1b2a.js" defer></script><script src="/assets/js/3.9792adb6.js" defer></script>
  </body>
</html>
